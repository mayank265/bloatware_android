"use strict";const versionPW="1.1",TIMEOUT_SENT_GAM_IMPRESSION=400,TIMEOUT_SENT_GAM_RENDER=500,HOUR_SECONDS=36e5,DAY_SECONDS=864e5,PAGE_ID=uuidv4(),expiryStorage={getItem(e){const t=expiryStorage.getJSON(e);return t?this.isExpire(t)?(localStorage.removeItem(e),null):t:null},getItemValue(e){const t=expiryStorage.getItem(e);return t?t.value:null},getItemExpires(e){const t=expiryStorage.getItem(e);return t?t.expires:null},setItem(e,t,i){const n={value:t,expires:(new Date).getTime()+i};expiryStorage.setJSON(e,n)},updateItemValue(e,t){const i=expiryStorage.getJSON(e);return!!i&&(i.value=t,expiryStorage.setJSON(e,i),!0)},updateItemExpires(e,t){const i=expiryStorage.getJSON(e);return!!i&&(i.expires=t,expiryStorage.setJSON(e,i),!0)},getJSON(e){const t=localStorage.getItem(e);return t?JSONParseSafe(t):null},setJSON:(e,t)=>localStorage.setItem(e,JSON.stringify(t)),isExpire:e=>(new Date).getTime()>e.expires,garbageCollector(e,t=36e5){setTimeout((()=>{Object.keys(localStorage).forEach((t=>{0===t.indexOf(e)&&this.getItem(t)})),this.garbageCollector(e,t)}),t)}},caps={key:{getSkip:(e,t,i)=>caps.key.make("hb","skc",e,t,i,"s"),getRepeat:(e,t,i)=>caps.key.make("hb","skc",e,t,i,"r"),getCap:(e,t,i)=>caps.key.make("hb","skc",e,t,i,"c"),getBidderCap:(e,t)=>caps.key.make("hb","bc",e,t),getAmazonCap:e=>caps.key.make("hb","bac",e),make:(...e)=>e.join("_")},counter:{make:(e,t,i)=>(null===expiryStorage.getItem(e)&&expiryStorage.setItem(e,t,i),{count:()=>expiryStorage.getItemValue(e),ttl:()=>expiryStorage.getItemExpires(e),setCount(t,i){expiryStorage.setItem(e,t,i)},incrCount(){expiryStorage.updateItemValue(e,this.count()+1,i)}})},winbidder:{key:e=>`hb_${PAGE_ID}_${e}`,incr(e){const t=this.key(e),i=expiryStorage.getItem(t);i?expiryStorage.updateItemValue(t,i.value+1,i.ttl):expiryStorage.setItem(t,1,864e5)},count(e){const t=this.key(e);return expiryStorage.getItemValue(t)||0}},check:{amazonCap(e,t){if(!e||!t)return!1;const i=caps.key.getAmazonCap(t),n=caps.counter.make(i,0,864e5);return!!(n.count()>=e)||(n.incrCount(),!1)},bidderCap(e,t){if(!(e&&e.cap&&t&&t.unitId))return!1;const i=caps.key.getBidderCap(e.bidder,t.unitId),n=caps.counter.make(i,0,864e5),r=e.cap;return!!(n.count()>=r)||(n.incrCount(),!1)},perPageCap(e,t){if(!(e&&e.pageCap&&t&&t.unitId&&t.pageId))return!1;if(!e.pageCap.skip&&!e.pageCap.repeat&&!e.pageCap.cap)return!1;const i=864e5,{pageCap:n}=e,{unitId:r,pageId:o}=t,d=caps.key.getSkip(e.bidder,r,o),s=caps.key.getRepeat(e.bidder,r,o),a=caps.key.getCap(e.bidder,r,o),c=n.skip,u=n.repeat,p=n.cap,g=caps.counter.make(d,0,i),l=caps.counter.make(s,0,i),b=caps.counter.make(a,0,i),m=!!n.capPerFill,f=g.count(),h=l.count(),w=m?t.winbidder:b.count();if(p>0&&w>=p)return!0;if(c>0&&f<c)return g.incrCount(),!0;if(u>0){if(h<u)return l.incrCount(),0!==h||(!m&&p>0&&b.incrCount(),!1);{const e=b.ttl();return l.setCount(0,e-(new Date).getTime()),!0}}return!m&&p>0&&b.incrCount(),!1}},filterBidders:(e,t)=>e.filter((e=>{const i=caps.winbidder.count(e.bidder);return!(caps.check.bidderCap(e,t)||caps.check.perPageCap(e,{...t,winbidder:i}))}))},ortbInfo={timeout:8e3,convertSizes:function(e){if(!e)return;if("string"==typeof e&&e.includes("x")&&(e=e.split("x").map((e=>parseInt(e)))),!e[0])return;let t=[];return Array.isArray(e[0])?e.forEach((e=>{t.push({w:e[0],h:e[1]})})):t.push({w:e[0],h:e[1]}),t}},createOrtb={nm:function(e,t){let i=ortbInfo.convertSizes(t.sizes||e.sizesAdUnit||e.size||e.sizes)||[300,250];return{bidder:"nm",endpoint:"https://pbs.nextmillmedia.com/openrtb2/auction",corsMode:"cors",body:{id:e.auctionId,source:{tid:e.auctionId,ext:{schain:{ver:"1.0",complete:1,nodes:[{asi:"nextmillennium.io",sid:"15170",hp:1}]}}},tmax:ortbInfo.timeout||8e3,imp:[{id:e.divId,ext:t.bidderParams||{},banner:{format:i}}],test:t.test||0,ext:t.rootExt,site:{publisher:{id:t.siteId||1},page:document.domain},device:{w:window.innerWidth||screen.availWidth,h:window.innerHeight||screen.availHeight},regs:{ext:{us_privacy:"1---"}}}}},loopme:function(e,t){let i=ortbInfo.convertSizes(t.sizes||e.sizesAdUnit||e.size||e.sizes)||[300,250];return{bidder:"loopMe",endpoint:"https://next-millennium-media-eu.loopmertb.com",corsMode:"no-cors",body:{id:e.auctionId,source:{tid:e.auctionId,ext:{schain:{ver:"1.0",complete:1,nodes:[{asi:"nextmillennium.io",sid:"15170",hp:1}]}}},tmax:8e3,imp:[{id:e.divId,ext:t.imp&&t.imp.biddersExt||{},ext:{},banner:{w:i[0].w,h:i[0].h,format:i}}],ext:{},site:{page:document.domain},device:{w:window.innerWidth||screen.availWidth,h:window.innerHeight||screen.availHeight,ip:t.ip,os:t.os,osv:t.osv,ua:window.navigator.userAgent},at:1,cur:["USD"],regs:{ext:{us_privacy:"1---"}}}}}};window.PWT=window.PWT||{},window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.pbjs.analyticAdapterOptions={version:"1.0",data:{},auctions:{}},window.pbjs.adUnitExpire={},window.pbjs.eventBidWonFuncs={},window.pbjs.que.push((function(){registerAliases(window),window.pbjs.enableAnalytics([{provider:"nextMillennium",options:window.pbjs.analyticAdapterOptions}]),window.pbjs.onEvent("bidWon",(function(e){window.pbjs.eventBidWonFuncs[e.auctionId]&&window.pbjs.eventBidWonFuncs[e.auctionId].func(e)}))}));const isLocalStorage=!!window.localStorage;function wrapperPbjs(e){e.eventBus=createEventBus(),e.adMetrics=createMetrics(e.eventBus,e),e.startTime=Date.now(),e.eventBus.registerStartWrapper();const t=e.wPbjs||{};t.cmd=e.wPbjs.cmd||[],e.pWindow=void 0;try{e.parent.parent.document,e.pWindow=e.parent.parent.window}catch(t){try{e.parent.document,e.pWindow=e.parent.window}catch(t){e.pWindow=e}}e.tWindow=getTopWindow(e),e.setWinBid=ue;const i="https://hb.brainlyads.com",n=12e5;let r,o,d,s=null,a=null,c=null,u={amazon:!1,pbjs:!1},p={gamImpression:!1,gamRender:!1},g=!1,l=null,b=0,m=[],f=[],h=null,w={},A={},y={},v=!1,S=!1,j="",C="",I=[],x={},T={},E={},P=[],_=0,U="",W=1,k=0,z=0,O=0,B=!1,D=!1,$=!1,R=null,N=!1,F=1;t.debug=function(e){if("1"===G("hbdebug"))return!0;return e.pWindow.location&&e.pWindow.location.search&&e.pWindow.location.search.replace(/^\?/,"").split("&").some((e=>"hbdebug=1"===e))}(e),t.run=function(i){if(M.logger.log(`wPbjs.run (${i&&i.divId}) >>>`,t),i){if(e.pbjsAuctionId=c=i.auctionId,e.pbjsUnit=i.unit,i.type&&2==i.type&&(F=2),i.unitRule&&(f=i.unitRule),f&&i.unitRulePercent){const e=i.unitRulePercent;r=100*Math.random()<e.percent?e.test_status:"Control"}if("string"==typeof i.customTargetings)try{i.customTargetings=JSON.parse(i.customTargetings)}catch(e){i.customTargetings=[]}if(Array.isArray(i.customTargetings)){let e=i.customTargetings.find((e=>"refresh"==e[0]));e&&(_=parseInt(e[1])||0),i.unitIds.keyValueRefresh=_,i.unitIds.unitRule=f.reduce(((e,t)=>(e[t.code]=t.price,e)),{})}if(e.pbjs.analyticAdapterOptions.data[c]={unitIds:i.unitIds},e.pbjs.adUnitExpire[c]=Date.now()+n,i.debug&&(t.debug=!0),M.logger.log("wPbjs => wPbjs.run >>> ",i,e.pbjs.analyticAdapterOptions),i.unitIndex&&(b=i.unitIndex),i.adUnitCodeToDFPPath&&(A=i.adUnitCodeToDFPPath),i.biddingRule&&(y=i.biddingRule),i.skipDFP&&(S=i.skipDFP),i.codeAdUnit&&(j=i.codeAdUnit),i.divId&&(C=i.divId),i.unitSizes){let e=i.unitSizes;M.logger.log(`wPbjs => paUnitSizes >>> (unitId = ${b}) Array = ${Array.isArray(e)}`,typeof e,JSON.stringify(e),"sizesAdUnit >>>",JSON.stringify(i.sizesAdUnit));try{"string"==typeof i.unitSizes&&(i.unitSizes=JSON.parse(i.unitSizes)),Array.isArray(i.unitSizes)||(i.unitSizes=[])}catch(e){console.error(`unitSizes parse >>> (unitId = ${b})`,i.unitSizes,e),i.unitSizes=[]}Array.isArray(i.unitSizes)&&i.unitSizes.length&&(i.sizesAdUnit=i.unitSizes,i.adUnits.forEach((e=>{/^1\-.+/.test(e.code)&&(e.mediaTypes.banner&&e.mediaTypes.banner.sizes&&(e.mediaTypes.banner.sizes=i.sizesAdUnit),e.mediaTypes.video&&e.mediaTypes.video.playerSize&&(e.mediaTypes.video.playerSize=i.sizesAdUnit))}))),M.logger.log(`wPbjs => set sizesAdUnit >>> (unitId = ${b})`,JSON.stringify(i.sizesAdUnit))}i.adUnits&&(isLocalStorage&&(i.adUnits=i.adUnits.map((e=>(e.bids=caps.filterBidders(e.bids,{unitId:b,pageId:PAGE_ID}),e)))),m=i.adUnits),i.nmAd&&(T=i.nmAd),i.unitIds&&(E=i.unitIds),!i.skipDFP&&i.customTargetings&&(I=i.customTargetings),h=r||i.biddingRuleTestStatus,h&&I.push(["testStatus",h]),i.unit&&i.unit.domain&&(d=i.unit.domain),i.schain&&(o=getPbjsSchain(i.schain)),Array.isArray(i.schains)&&(P=getPbjsSchains(i.schains)),i.amazonBids=isLocalStorage?i.amazonBids&&!caps.check.amazonCap(i.amazonCap,b):i.amazonBids,l=function(e){try{const t=e.parent.frameElement.parentElement.id;return t?t.split("-").pop():(M.logger.log("powerad ID not set"),"")}catch{return M.logger.log("powerad ID not set"),""}}(e);try{i.amazonBids&&!S&&(W++,function(t){!function(e,t,i,n,r,o,d){function s(i,n){t[e]._Q.push([i,n])}t[e]||(t[e]={init:function(){s("i",arguments)},fetchBids:function(){s("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(o=i.createElement(n)).async=!0,o.src=r,(d=i.getElementsByTagName(n)[0]).parentNode.insertBefore(o,d))}("apstag",e,e.document,"script","//c.amazon-adsystem.com/aax2/apstag.js");let i,n={pubID:"79e40b05-e673-4b6c-85f9-79252a7f96a5",schain:o.config,bidTimeout:2e3};setTimeout(V,t.prebidBidTimeout||1500,t.type,u);let r={slots:[{sizes:t.sizesAdUnit}]};1==t.type&&(n.adServer="googletag",r.slots[0].slotName=t.codeAdUnit,r.slots[0].slotID=t.divId,i=function(t){u.amazon||e.googletag.cmd.push((function(){e.apstag.setDisplayBids(),V(1,u)}))});2==t.type&&(n.videoAdServer="DFP",r.slots[0].mediaType="video",r.slots[0].slotID="video_HB",i=function(e){if(!u.amazon){try{x=e&&e[0]&&e[0].qsParams&&e[0].qsParams.split("&").reduce(((e,t)=>{if(t){let i=t.split("=");e[i[0]]=i[1]}return e}),{})||{}}catch(e){console.error(e),x={}}V(2,u)}});e.apstag.init(n),e.apstag.fetchBids(r,i)}(i),v=i.amazonBids),function(t){M.logger.log(`wPbjs => (${C}) loadScripts!!!!!`);const i={src:"https://www.googletagservices.com/tag/js/gpt.js",async:!0};let n=[];t.skipDFP||n.push(i);t.isBidderSublime&&n.push({src:`//sac.ayads.co/sublime/${t.sublimeZoneId}/prebid`,async:!1});_loadJSScripts(e,n)}(i),i.nearEnabled&&!S&&function(e){e.googletag.cmd.push((function(){const t=e.npt||e.pWindow.npt;if(!t)return M.logger.error("wPbjs => npt not found >>> initNear"),void e.googletag.enableServices();function i(t){e.googletag.pubads().setPublisherProvidedId(t._ncid),e.googletag.enableServices()}t.setIdCallback(i),t.process()}))}(e),1==F?function(i){M.logger.log(`wPbjs => (${C}) >>> prebid banner!!!!! (Skip GAM = ${i.skipDFP})`),e.apAds=new Event("apAds"),e.apAdsLine=new Event("apAds_line"),e.apAdsX=new Event("apAds_x"),e.apAdsHide=new Event("apAds_hide"),e.adUnitSize=null,i.skipDFP?(console.log("frameWindow.googletag >>>",e.googletag),e.googletag.pubads=function(){return e.document.getElementById(i.divId)}):e.googletag.cmd.push((function(){e.googletag.pubads().disableInitialLoad()}));if(ce(i.deducts),e.pbjs.que.push((function(){e.startAuctionTime=Date.now(),e.eventBus.registerStartAuction(e.pbjsAuctionId);const r={debug:t.debug,priceGranularity:"high",consentManagement:{usp:{cmpApi:"iab",timeout:i.usPrivacyTimeout}},userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}}},schain:o};i.isLiveRamp&&(r.userSync.userIds=[{name:"identityLink",params:{pid:i.liverampPartnerId},storage:{type:"cookie",name:"idl_env",expires:1}}],r.userSync.syncDelay=i.userSyncDelay),i.isGdrpIp&&(r.consentManagement.gdpr={cmpApi:"iab",defaultGdprScope:!0}),i.pbsBidders.length&&(M.logger.log("Serverside!"),r.s2sConfig={accountId:"1",enabled:!0,bidders:i.pbsBidders,endpoint:"https://pbs.nextmillmedia.com/openrtb2/auction",adapter:"prebidServer",cookieSet:!0,syncEndpoint:"https://pbs.nextmillmedia.com/cookie_sync"},i.buyeruids&&(r.s2sConfig.ortb2={user:{ext:{prebid:{buyeruids:i.buyeruids}}}})),M.logger.log("wPbjs => pbjsConfig",r),hasBidder(i.adUnits,"yahoossp")&&(r.yahoossp={mode:"all"}),e.pbjs.setConfig(r),P.forEach((t=>{e.pbjs.setBidderConfig(t)})),e.pbjs.eventBidWonFuncs[c]={expire:Date.now()+n},e.pbjs.eventBidWonFuncs[c].func=function(t){try{if(!m.some((e=>e.code==t.adUnitCode)))return;s.prebidImpression=!0,ie(s),re(s),isLocalStorage&&caps.winbidder.incr(t.bidder),e.pbjs.eventBidWonFuncs[c].winBid=t,ue(e,pe(l,b,i.divId,t)),e.renderAdTime=Date.now(),e.eventBus.registerEndRenderAd(e.pbjsAuctionId),S&&e.adMetrics.flush(e.pbjsAuctionId,e.pbjsUnit,t),M.logger.log(`wPbjs => (${C}) >>> runned pbjs.renderAd`,t.adUnitCode);try{e.pWindow.hb_win||(e.pWindow.hb_win={});let n=i.unitIds[t.adUnitCode];e.pWindow.hb_win[n]||(e.pWindow.hb_win[n]={}),e.pWindow.hb_win[n][t.bidderCode]||(e.pWindow.hb_win[n][t.bidderCode]=0),e.pWindow.hb_win[n][t.bidderCode]++}catch(e){}let n=i.bidderOptions||{},r=i.size1x1||{};"gumgum"!=t.bidderCode&&"33across"!=t.bidderCode||(M.logger.log("wPbjs => apAds_hide now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsHide),M.logger.log("wPbjs => option remove code (bidder: "+t.bidderCode+")"),"gumgum"==t.bidderCode&&(e.pWindow.document.querySelector("head").appendChild(e.pWindow.document.createElement("script")).innerHTML=`setTimeout(function() {for(let i of window.document.querySelectorAll('[id^=ad_is]')) {try{i.remove();} catch(e) {console.log('error removing apAds ad (gumgum):');}}},${i.gumgumRemovalTime})`),"33across"==t.bidderCode&&(e.pWindow.document.querySelector("head").appendChild(e.pWindow.document.createElement("script")).innerHTML=`setTimeout(function() {for(let i of window.document.querySelectorAll('[class^="ttx"],[id^="tynt"]')) {try{i.remove();} catch(e) {console.log('error removing apAds ad (33across):');}}},${i.gumgumRemovalTime})`));let o=m.find((e=>e.code===t.adUnitCode));if(!o)return void M.logger.log(`wPbjs (${C}) >>> error: ad unit not found`,t.adUnitCode);"undertone"==t.bidderCode&&(M.logger.log("wPbjs => apAds now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAds),n[t.bidderCode].hideAd&&(M.logger.log("wPbjs => apAds_hide now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsHide)),n[t.bidderCode].removeX&&(M.logger.log("wPbjs => apAds_x now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsX)),n[t.bidderCode].removeCode&&(M.logger.log("wPbjs => option remove code (bidder: "+t.bidderCode+")"),e.pWindow.document.querySelector("head").appendChild(e.pWindow.document.createElement("script")).innerHTML=`setTimeout(function() {try{window.document.querySelector('.ut_container').remove();} catch(e) {console.log('error removing apAds ad:');}},${i.gumgumRemovalTime})`),r[t.bidderCode]&&!o.sizes.some((e=>e[0]===t.width&&e[1]===t.height))&&n[t.bidderCode].inlineHeight&&(M.logger.log("wPbjs => apAds_line now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsLine)));let d=!1;if("teads"==t.bidderCode&&r.teads&&n.teads.apAdsDiv&&(1===t.width&&1===t.height||!o.sizes.some((e=>e[0]===t.width&&e[1]===t.height)))){M.logger.log("wPbjs => apAds_div now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAds),d=!0;let i=new CustomEvent("apAds_div",{detail:t.adUnitCode});e.document.dispatchEvent(i)}["justpremium","sublime","teads","triplelift"].indexOf(t.bidderCode)>-1&&r[t.bidderCode]&&!o.sizes.some((e=>e[0]===t.width&&e[1]===t.height))&&(n[t.bidderCode].stopRefresh&&(M.logger.log("wPbjs => apAds now fired (bidder: "+t.bidderCode+")"),d||(e.document.dispatchEvent(e.apAds),d=!0)),n[t.bidderCode].inlineHeight&&(M.logger.log("wPbjs => apAds_line now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsLine)),n[t.bidderCode].removeX&&(M.logger.log("wPbjs => apAds_x now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsX)),n[t.bidderCode].hideAd&&(M.logger.log("wPbjs => apAds_hide now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsHide))),setTimeout(deleteEventBidWon,1e4,c)}catch(e){console.error(e)}},e.pbjs.addAdUnits(i.adUnits),g=!0,X(i)})),w={},!i.skipDFP){let n=[];i.sizeFluid&&n.push("fluid"),(!i.sizeFluid||i.sizeFluid&&!i.sizeFluidOnlyForGAM)&&(n=n.concat(i.sizesAdUnit)),e.googletag.cmd.push((function(){M.logger.log(`wPbjs => (${C}) >>> init GAM slots`);try{a=e.googletag.defineSlot(i.codeAdUnit,n,i.divId).addService(e.googletag.pubads()),e.googletag.pubads().enableSingleRequest(),!0!==i.nearEnabled&&e.googletag.enableServices(),X(i)}catch(e){M.logger.error(`wPbjs => (${C}) >>> Error: init GAM slots`,e),t.debug||console.error(e)}}))}setTimeout(Q,3500,!0)}(i):function(i){M.logger.log(`wPbjs => (${C}) >>> prebid video!!!!!`),e.adUnitSize=null,ce(i.deducts),e.pbjs.que.push((function(){const r={debug:t.debug,priceGranularity:"high",consentManagement:{usp:{cmpApi:"iab",timeout:i.usPrivacyTimeout}},userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}}},cache:{url:i.cacheUrl},schain:o};i.isGdrpIp&&(r.consentManagement.gdpr={cmpApi:"iab",defaultGdprScope:!0}),i.pbsBidders.length&&(M.logger.log("Serverside!"),r.s2sConfig={accountId:"1",enabled:!0,bidders:i.pbsBidders,endpoint:"https://pbs.nextmillmedia.com/openrtb2/auction",adapter:"prebidServer",cookieSet:!0,syncEndpoint:"https://pbs.nextmillmedia.com/cookie_sync"},i.buyeruids&&(r.ortb2={user:{ext:{prebid:{buyeruids:i.buyeruids}}}})),M.logger.log(`wPbjs => (${C}) pbjsConfig`,r),hasBidder(i.adUnits,"yahoossp")&&(r.yahoossp={mode:"all"}),e.pbjs.setConfig(r),P.forEach((t=>{e.pbjs.setBidderConfig(t)})),e.pbjs.addAdUnits(i.adUnits),e.pbjs.eventBidWonFuncs[c]={expire:Date.now()+n},e.pbjs.eventBidWonFuncs[c].func=function(t){M.logger.log(`wPbjs => (${C}) event bidWon`);try{e.pWindow.hb_win||(e.pWindow.hb_win={});var n=E[t.adUnitCode];ue(e,pe(l,n,i.divId,t)),e.pWindow.hb_win[n]||(e.pWindow.hb_win[n]={}),e.pWindow.hb_win[n][t.bidderCode]||(e.pWindow.hb_win[n][t.bidderCode]=0),e.pWindow.hb_win[n][t.bidderCode]++}catch(e){console.err(e)}};try{e.pbjs.requestBids({auctionId:c,adUnitCodes:i.adUnits.map((e=>e.code)),bidsBackHandler:ee,timeout:3e3})}catch(e){M.logger.error(e)}})),setTimeout(ee,3500)}(i),i.ortbBidders.length&&!S&&(W++,$=i.ortbBidders,$=$.map((e=>createOrtb[e.bidder](i,e.params||{}))),function(e){if(!(e=e.filter((e=>e.endpoint&&e.body))).length)return L();z=e.length,e.forEach(((e,t)=>{fetch(e.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},mode:e.corsMode,body:JSON.stringify(e.body)}).then((e=>{if(200===e.status)return e.json()})).then((e=>{if(!e)return L();L(e)})).catch((t=>{console.error("error from ortb bidder: ",e.bidder||"",t),L()}))})),setTimeout((()=>{H()}),1500)}($))}catch(e){console.error(e)}}};const M={logger:{getTitle:()=>"%chb-1.1",styles:{log:"color: white; font-weight: 700; background: #06d8c6; padding: 2px 4px; border-radius: 4px;",error:"color: white; font-weight: 700; background: #fd3c34; padding: 2px 4px; border-radius: 4px;",warn:"color: white; font-weight: 700; background: #ffff99; color: #444; padding: 2px 4px; border-radius: 4px;"},log(){t.debug&&console.log.apply(console,[this.getTitle(),this.styles.log,...arguments])},error(){console.error.apply(console,[this.getTitle(),this.styles.error,...arguments])},warn(){t.debug&&console.warn.apply(console,[this.getTitle(),this.styles.warn,...arguments])}}};function J(e){if("function"==typeof e)try{e.call()}catch(e){M.logger.error("Error processing command:",e.message,e.stack)}else M.logger.error("Command is not a function")}function G(t){let i=e.document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\\+^])/g,"\\$1")+"=([^;]*)"));return i?decodeURIComponent(i[1]):void 0}function V(e,t){t.amazon||(t.amazon=!0,Y("amazon"))}t.renderOrtbAd=function(t,i){if(N)return;if(N=!0,!R||!R.bid)return;let n=e.document.createElement("iframe");n.setAttribute("frameborder",0),n.setAttribute("scrolling","no"),n.setAttribute("marginheight","0"),n.setAttribute("marginwidth","0"),n.setAttribute("hspace","0"),n.setAttribute("vspace","0"),n.setAttribute("topmargin",0),n.setAttribute("leftmargin",0),n.setAttribute("allowtransparency",!0),n.setAttribute("border","0px"),n.setAttribute("width",R.bid.w),n.setAttribute("height",R.bid.w),n.style.width=R.bid.w+"px",n.style.height=R.bid.h+"px";try{t.body.appendChild(n)}catch(e){return void console.error("failed to append ortb frame, ",e)}let r=n.contentDocument;r?(r.open(),r.write(R.bid.adm),r.close(),t.defaultView.frameElement.width=R.bid.w||300,t.defaultView.frameElement.height=R.bid.h||250):console.warn("failed to get frameDocument for ortb iframe")},t.renderAd=function(e,t){if(!T||!T.id)return;M.logger.log(`wPbjs => (${C})renderAd - fakeAd nmAd.id=${T.id}`),e.defaultView.frameElement.width=T.size[0]||300,e.defaultView.frameElement.height=T.size[1]||250;let n=T.url||`${i}/images/${T.img}`,r=e.createElement("img");r.src=n,r.style.padding="0px",r.style.margin="0px",r.style.border="0px",e.body.appendChild(r)},t.cmd.push=J,t.cmd.forEach((e=>{J(e)}));let q=[];function L(e){B||(e&&q.push(e),++O>=z&&function(){if(B)return H();if(B=!0,!q.length)return H();let e,t=0;q.forEach(((i,n)=>{i.seatbid.forEach(((i,n)=>{i.bid.forEach(((i,n)=>{i.price>t&&(e=i,t=i.price)}))}))})),e&&t&&(R={cpm:t,bid:e,size:[e.w||300,e.h||250]});H()}())}function H(){if(D)return;D=!0;let t={};if(!(R&&R.cpm&&R.bid))return Y("openrtb");t={ortb_pb:R.cpm.toFixed(2),ortb_bidder:R.bidder||"unknown",ortb_size:(R.size||[300,250]).join("x"),auction_id:c},e.googletag.cmd.push((()=>{Object.entries(t).forEach((e=>{a.setTargeting(e[0],e[1])}))})),Y("openrtb")}function X(t){(t.skipDFP||a&&g)&&e.pbjs.que.push((function(){try{M.logger.log(`wPbjs => (${C}) >>> run banner request`),e.pbjs.requestBids({auctionId:c,adUnitCodes:t.adUnits.map((e=>e.code)),bidsBackHandler:Q,timeout:t.prebidBidTimeout})}catch(e){M.logger.error(e)}}))}function Q(t){M.logger.log(`wPbjs => (${C}) ${t?">>> Timeout trigger ":""}>>> func initAdserver - start, pbjs.initAdserverSet =`,u.pbjs),u.pbjs||(e.endAuctionTime=Date.now(),e.eventBus.registerEndAuction(e.pbjsAuctionId),u.pbjs=!0,S?function(){M.logger.log(`wPbjs => (${C}) >>> initAdserverBannerSkipGAM`),e.googletag.cmd&&e.googletag.cmd[0]&&e.googletag.cmd[0]();let t=new CustomEvent("slotRenderEnded");t.isEmpty=!0,e.pbjs.que.push((function(){let i=ae(Z()),n=i.adUnitCode;if(M.logger.log("wPbjs => func initAdserver - selectWin, winAdUnitCode =",n),i.isWin){t.isEmpty=!1,t.size=e.adUnitSize;let i=e.pbjs.getAdserverTargetingForAdUnitCode(n);M.logger.log("wPbjs => func initAdserver - getAdserverTargetingForAdUnitCode, winTargetData =",i),i=JSON.parse(JSON.stringify(i)),w[n]=i,w[n].rendered=!1,e.dataPbjsWin={},e.dataPbjsWin[n]=i;let r=new Event("setTargeting");e.document.dispatchEvent(r),Y("prebid - skipDFP")}e.googletag.pubads().dispatchEvent(t)}))}():(M.logger.log(`wPbjs => (${C}) >>> initAdserverBannerGAM`),e.googletag.cmd.push((function(){e.pbjs.que.push((function(){let e=ae(Z()),t=e.adUnitCode,i=e.bidData;M.logger.log(`wPbjs => (${C}) winAdUnitCode = ${t}`),I.forEach((e=>{Array.isArray(e)&&e.length>1&&a.setTargeting(String(e[0]),String(e[1]))}));let n="hb_pb";if(e.gamCpm&&!e.isWin&&(a.setTargeting("fp_pb",e.gamCpm.toFixed(2)),a.setTargeting("nm_id",T.id),te(e.gamCpm)),M.logger.log(`wPbjs => (${C}) >>> winAdUnitCode = ${t}`),e.isWin){M.logger.log(`wPbjs => (${C}) >>> set targetings, winAdUnitCode = ${t}`);let r=i.adserverTargeting;Object.keys(r).forEach((e=>{a.setTargeting(e,r[e])}));let o=r&&parseFloat(r.hb_pb);a.setTargeting("orig_hb_pb",e.maxCpm.toFixed(2)),e.gamCpm&&e.maxCpm<e.gamCpm&&(o=e.gamCpm,a.setTargeting(n,o.toFixed(2)),te(e.gamCpm)),K({biddingRule:y,cpm:o,divId:C,gptSlot:a,targets:r,winAdUnitCode:t})}else a.setTargeting("hb_pb","0.00"),a.setTargeting("orig_hb_pb","0.00");Y("prebid")}))}))))}function K({biddingRule:e,cpm:t,divId:i,gptSlot:n,targets:r,winAdUnitCode:o}){if(Number.isNaN(t)||!(r&&e[r.hb_bidder]&&e[r.hb_bidder].value))return;let d=1==e[r.hb_bidder].type&&e[r.hb_bidder].value||2==e[r.hb_bidder].type&&e[r.hb_bidder].value*t||0;if(!d)return;let s=t+d;s=s.toFixed(2),n.setTargeting(keyHbPb,s),M.logger.log(`wPbjs => (${i}) set targetings, winAdUnitCode = `,o,"hb_bidder=",r.hb_bidder,"hb_pb=",r.hb_pb,"google hb_pb=",s);let a="hb_pb_"+r.hb_bidder;n.getTargeting(a).length&&(n.setTargeting(a,s),M.logger.log(`wPbjs => (${i}) >>> set targetings, winAdUnitCode = `,o,"hb_bidder=",r.hb_bidder,"hb_pb=",r.hb_pb,"google "+a+"=",s))}function Y(t){M.logger.log(`wPbjs => (${C}) >>> bidderTypeComplete(${t})`,k+1,W),++k==W&&(1==F&&(S?(M.logger.log(`wPbjs => (${C}) >>> skipDFP - run renderAd`),function(){if(M.logger.log(`wPbjs => (${C}) >>> renderAd - start`),!w)return;let t=Object.keys(w);M.logger.log(`wPbjs => (${C}) func renderAd - codes = `,t),t.forEach((t=>{if(w[t].rendered)return;w[t].rendered=!0;let i=e.document.getElementById(C);if(M.logger.log(`wPbjs => (${C}) func renderAd - block = `,i),!i)return;let n=e.document.createElement("iframe");n.id=`google_ads_iframe_${C}_0`,n.setAttribute("frameborder",0),n.setAttribute("scrolling","no"),n.setAttribute("marginheight","0"),n.setAttribute("marginwidth","0"),n.setAttribute("hspace","0"),n.setAttribute("vspace","0"),n.setAttribute("topmargin",0),n.setAttribute("leftmargin",0),n.setAttribute("allowtransparency",!0),n.setAttribute("width",0),n.setAttribute("height",0),n.setAttribute("border","0px"),n.style.border="0",i.appendChild(n);let r=w[t],o=n.contentWindow.document;if(r&&r.hb_adid){M.logger.log(`wPbjs => (${C}) func renderAd - RUN pbjs.renderAd, adServerTargeting = `,r),e.pbjs.renderAd(o,r.hb_adid);const t=getSerializeStringImp({adserverTargeting:r,divId:C,utils:M});setPixel({frameWindow:e,hbImpr:t})}delete w[t]}))}()):e.googletag.cmd.push((()=>{try{e.googletag.pubads().addEventListener("slotRenderEnded",(function(){e.eventBus.registerSlotRenderEnded(e.pbjsAuctionId),s&&(s.gamRender=!0),re(s)})),e.googletag.pubads().addEventListener("slotOnload",(function(){e.eventBus.registerSlotOnload(e.pbjsAuctionId);const t=e.pbjs.eventBidWonFuncs[e.pbjsAuctionId],i=t?t.winBid:null;i&&e.adMetrics.flush(e.pbjsAuctionId,e.pbjsUnit,i)})),e.googletag.pubads().addEventListener("impressionViewable",(function(){e.eventBus.registerImpressionViewable(e.pbjsAuctionId),s&&(s.gamImpression=!0),ie(s)})),M.logger.log(`wPbjs => (${C}) >>> GPT refresh`,a),e.googletag.pubads().refresh([a])}catch(e){console.error(e)}}))),2==F&&function(){M.logger.log(`wPbjs => (${C}) >>> run video`);let t=ae(Z());U=t.adUnitCode;let{videoUrl:n,tracks:r}=function(e){let t,n;if(S)if(e.isWin){if(t=function(e){if(!e||!e.bidData)return;return e.bidData.vastUrl?e.bidData.vastUrl:`https://cache.hb.brainlyads.com/cache?uuid=${e.bidData.adserverTargeting.hb_uuid}`}(e),t){n={impression:`${getOriginNMStatistic()}/track/video/impression?uuid=${e.bidData.adserverTargeting.hb_uuid}`}}}else t=`${i}/vast-cap.xml`;else t=function(){let e=U||Object.keys(A)[0],t=I.reduce(((e,t)=>(Array.isArray(t)&&t.length>1&&(e[String(t[0])]=String(t[1])),e)),x);return pbjs.adServers.dfp.buildVideoUrl({adUnit:m.find((function(t){return t.code==e})),bid:!U&&{}||void 0,params:{iu:A[e],cust_params:t,output:"vast"}})}();return{videoUrl:t,tracks:n}}(t);U&&e.pbjs.markWinningBidAsUsed({adUnitCode:U});M.logger.log(`wPbjs => (${C}) >>> vastURL =`,n,r||"");let o=e.document.getElementById(C);o&&e.vastAd&&e.vastAd(n,o,r)}())}function Z(){return M.logger.log(`wPbjs => (${C}) >>> getAllBidResponeses`),m.map((e=>e.code)).reduce(((t,i)=>{let n=e.pbjs.getBidResponsesForAdUnitCode(i);return n&&(t[i]=n),t}),{})}function ee(){M.logger.log(`wPbjs => (${C}) >>> run initAdserver video, isRun = ${u.pbjs}`),u.pbjs||(u.pbjs=!0,Y("prebid"))}function te(e){se({eventName:"gamFloorprice",data:{auctionId:c,bidder:"gam",unitId:b||E&&E[Object.keys(E)[0]],domain:d,floorprice:parseFloat(e)},timestamp:Date.now()})}function ie(e){let t="gam";e?e.gamImpression&&e.prebidImpression?(t=e.bidderCode,ne({info:e,bidder:t})):e.gamImpression&&setTimeout(ne,400,{info:e,bidder:t,isTimeout:!0}):ne({info:e,bidder:t})}function ne({info:e,bidder:t,isTimeout:i}){de({eventName:"gamImpression",info:e,bidder:t,isTimeout:i})}function re(e){let t="gam";e?e.gamRender&&e.prebidImpression?(t=e.bidderCode,oe({info:e,bidder:t})):e.gamRender&&setTimeout(oe,500,{info:e,bidder:t,isTimeout:!0}):oe({info:e,bidder:t})}function oe({info:e,bidder:t,isTimeout:i}){de({eventName:"gamRender",info:e,bidder:t,isTimeout:i})}function de({eventName:e,info:t,bidder:i,isTimeout:n}){if(p[e])return;p[e]=!0,M.logger.log(`wPbjs => (${C}) send metric: ${e} ${n?"(timeout) ":""}>>>`,i,t);se({version:"1.2",eventName:e,data:{auctionId:c,bidder:i,unitId:b||E&&E[Object.keys(E)[0]],domain:d,refresh:E.keyValueRefresh,floorprice:E.unitRule[i]||void 0},timestamp:Date.now()})}function se(t){var i;e.pbjs._nextMillenniumStatistic?e.pbjs._nextMillenniumStatistic.add(t):(i=[t],fetch("https://report2.hb.brainlyads.com/statistics",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(i)}))}function ae(t){M.logger.log(`wPbjs => (${C}) >>> selectWin`,t);let i=f,n=Object.keys(t),r=[];for(let e=0;e<n.length;e++){let i=getAdUnitSize(m.find((t=>t.code===n[e]))),o=0;r.push({winAdUnitCode:"",winAdUnitData:null});for(let d=0;d<t[n[e]].bids.length;d++)M.logger.log(`wPbjs => (${C}) Response: adUnitCode=`+n[e]+" cpm=$"+t[n[e]].bids[d].cpm+" bidder="+t[n[e]].bids[d].bidder+(i&&" unitSizes="+JSON.stringify(i)||"")+" responseSize=["+t[n[e]].bids[d].width+","+t[n[e]].bids[d].height+"]"),t[n[e]].bids[d].cpm>o&&(r[e].winAdUnitCode=n[e],r[e].winAdUnitData=t[n[e]].bids[d],o=t[n[e]].bids[d].cpm)}M.logger.log(`wPbjs => (${C}) winsAdUnit >>>`,r);let o,a={isWin:!1,adUnitCode:"",bidData:null,maxCpm:0,gamCpm:0},u=i.find((e=>"gam"===e.code));a.gamCpm=u&&u.price||0;for(let e=0;e<r.length;e++)r[e].winAdUnitCode&&r[e].winAdUnitData.cpm>a.maxCpm&&(a.adUnitCode=r[e].winAdUnitCode,a.bidData=r[e].winAdUnitData,a.maxCpm=r[e].winAdUnitData.cpm);if(M.logger.log(`wPbjs => (${C}) response >>>`,a),a.adUnitCode){o=m.find((e=>e.code===a.adUnitCode));let e=i.find((e=>e.code===a.bidData.bidderCode)),t=e&&e.price;if(!t&&"rhythmone"==a.bidData.bidderCode){let e=o.bids.find((e=>"rhythmone"==e.bidder));t=e&&e.params&&e.params.floor||options.defaultFloorRhythmone}(!t||t&&t<=a.bidData.cpm)&&(a.isWin=!0,t&&t>0&&(M.logger.log(`wPbjs => (${C}) floorprice >>>`,t),E.floorprice=t))}if(a.isWin){let t=getAdUnitSize(o);e.adUnitSize=[a.bidData.width,a.bidData.height],M.logger.log(`wPbjs => (${C}) Winner: adUnitCode=`+a.adUnitCode+" cpm=$"+a.bidData.cpm+" bidder="+a.bidData.bidder+" unitSizes="+JSON.stringify(t)+" responseSize=["+a.bidData.width+","+a.bidData.height+"]"),s=a.bidData,1==F&&getNMTargetImp({bid:a.bidData,divId:C,unitId:b,refresh:E.keyValueRefresh,unitRule:E.unitRule,utils:M}),p=a.bidData,se({eventName:"winBid",data:{auctionId:c,bidder:p.bidder,unitId:b||E&&E[Object.keys(E)[0]],domain:d,refresh:E.keyValueRefresh,floorprice:E.unitRule[p.bidder]||void 0},timestamp:Date.now()})}var p;return a}function ce(t){let i=Object.keys(t);if(!t||i.length)return null;let n={};for(let e=0;e<i.length;e++)n[i[e]]={bidCpmAdjustment:function(n,r){return n*t[i[e]]}};e.pbjs.bidderSettings=n}function ue(e,t){try{M.logger.log("event bidWon: info",t),e.pWindow.paGlobal||(e.pWindow.paGlobal={}),e.pWindow.paGlobal.data||(e.pWindow.paGlobal.data={}),e.pWindow.paGlobal.data[t.paId]||(e.pWindow.paGlobal.data[t.paId]={}),e.pWindow.paGlobal.data[t.paId].winningBid=copySafe(t),function(e,t,i){t=`hb:${t}`;try{e.tWindow.postMessage(JSON.stringify({event:t,payload:i}),"*")}catch(e){console.error(e)}}(e,"bidWon",t)}catch(e){console.error(e)}}function pe(e,t,i,n={}){return{paId:e,unitId:t,divId:i,bidderCode:n.bidderCode,mediaType:n.mediaType,adDomain:n.adserverTargeting?n.adserverTargeting.hb_adomain:""}}}function loadJSScripts(e,t){console.log("loadJSScripts!!!!!");let i=[];const n={src:"https://hb.brainlyads.com/prebid.nm.1.0.js",async:!0};i.push({src:"https://js-sec.indexww.com/ht/p/188333-91751857837145.js",async:!0});let r=[n],o=!1,d=()=>{o||(o=!0,_loadJSScripts(e,r))};e.PWT.jsLoaded=d;let s=e.location.href,a="";if(s.indexOf("pwtv=")>0){let e=/pwtv=(.*?)(&|$)/g.exec(s);e.length>=2&&e[1].length>0&&(a=`/${e[1]}`)}i.push({src:`//ads.pubmatic.com/AdServer/js/pwt/157577/2378${a}/pwt.js`,async:!0}),_loadJSScripts(e,i,t),setTimeout(d,100)}function _loadJSScripts(e,t,i){if(!Array.isArray(t))return;let n=e.document.getElementsByTagName("script")[0],r=0;t.forEach((o=>{let d=e.document.createElement("script");d.async=!!o.async,d.type="text/javascript",d.src=o.src,"function"==typeof i&&(d.onload=function(){++r==t.length&&i()});try{n.parentNode.insertBefore(d,n)}catch(e){console.error(e)}}))}function deleteEventBidWon(e){window.pbjs.eventBidWonFuncs[e]&&delete window.pbjs.eventBidWonFuncs[e]}function cleanerAdUnitExpire(){const e=Date.now();Object.keys(window.pbjs.adUnitExpire).forEach((t=>{e>window.pbjs.adUnitExpire[t]&&(delete window.pbjs.adUnitExpire[t],window.pbjs.que.push((()=>{window.pbjs.analyticAdapterOptions.data[t]&&(Object.keys(window.pbjs.analyticAdapterOptions.data[t]).forEach((e=>{window.pbjs.removeAdUnit(e)})),delete window.pbjs.analyticAdapterOptions.data[t])})),window.eventBus&&window.eventBus.cleanAuction(t)),window.pbjs.eventBidWonFuncs[t]&&e>window.pbjs.eventBidWonFuncs[t].expire&&delete window.pbjs.eventBidWonFuncs[t]})),setTimeout(cleanerAdUnitExpire,6e4)}function createEventBus(){const e={startWrapper:"startWrapper",startAuction:"startAuction",endAuction:"endAuction",startRenderAd:"startRenderAd",endRenderAd:"endRenderAd",slotRenderEnded:"slotRenderEnded",slotOnload:"slotOnload",impressionViewable:"impressionViewable"},t={auctions:{}};let i={event:""};const n={debug:!1},r={events:t,state:i,eventsList:()=>Object.values(e),registerStartWrapper:function(){var i;t[i=e.startWrapper]=d(i),s(i),a(t[i]),t[i]},registerStartAuction:function(t){o(e.startAuction,t)},registerEndAuction:function(t){o(e.endAuction,t)},registerStartRenderAd:function(t){o(e.startRenderAd,t)},registerEndRenderAd:function(t){o(e.endRenderAd,t)},registerSlotRenderEnded:function(t){o(e.slotRenderEnded,t)},registerSlotOnload:function(t){o(e.slotOnload,t)},registerImpressionViewable:function(t){o(e.impressionViewable,t)},cleanAuction:function(e){delete t.auctions[e]},getStartWrapper:()=>t[e.startWrapper]||null,getStartAuction:t=>r.getAuctionEvent(t,e.startAuction),getEndAuction:t=>r.getAuctionEvent(t,e.endAuction),getStartRenderAd:t=>r.getAuctionEvent(t,e.startRenderAd),getEndRenderAd:t=>r.getAuctionEvent(t,e.endRenderAd),getSlotRenderEnded:t=>r.getAuctionEvent(t,e.slotRenderEnded),getSlotOnload:t=>r.getAuctionEvent(t,e.slotOnload),getImpressionViewable:t=>r.getAuctionEvent(t,e.impressionViewable),getAuctionEvent(e,i){const n=t.auctions[e];return n&&n[i]?n[i]:null},setDebug(e){n.debug=e}};return r;function o(e,i){return t.auctions[i]||(t.auctions[i]={}),t.auctions[i][e]=d(e),s(e),a(t.auctions[i][e]),t.auctions[i][e]}function d(e,t){const i={name:e,timestamp:Date.now(),performanceTime:performance?performance.now():null};return t&&(i.auctionId=t),i}function s(e){i.event=e}function a(e){if(!0===n.debug){const t=[e.auctionId?e.auctionId+":"+e.name:e.name,"Timestamp: "+e.timestamp,"PerfomanceTime: "+e.performanceTime];utils.logger.log(t.join("; "))}}}function createMetrics(e,t){const i={flush:function(e,t,n){try{const r={name:t&&t.name,domain:t&&t.domain,bidder:n&&n.bidderCode,metrics:i.calculate(e)};return i.send(r)}catch(e){console.error(e)}},calculate:function(e){const i={auctionInit:n(e),auctionHolding:r(e),renderAd:o(e),slotRenderEnded:d(e),slotOnload:s(e),prebidStartDuration:t.startAuctionTime-t.startTime,auctionDuration:t.endAuctionTime-t.startAuctionTime,renderAdDuration:t.renderAdTime-t.endAuctionTime};return Object.keys(i).forEach((e=>{null===i[e]&&delete i[e]})),i},send(e){fetch("https://hb.brainlyads.com/metrics",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)})}};return i;function n(t){return a(e.getStartWrapper(),e.getStartAuction(t))}function r(t){return a(e.getStartAuction(t),e.getEndAuction(t))}function o(t){return a(e.getStartRenderAd(t),e.getEndRenderAd(t))}function d(t){return a(e.getStartRenderAd(t),e.getSlotRenderEnded(t))}function s(t){return a(e.getStartRenderAd(t),e.getSlotOnload(t))}function a(e,t){let i=null;return e&&t?(i=e.hasOwnProperty("performanceTime")&&t.hasOwnProperty("performanceTime")?t.performanceTime-e.performanceTime:t.timestamp-e.timestamp,i=i>0?i:Math.abs(i),i=Math.round(i),i):i}}function hasBidder(e=[],t){return e.some((({bids:e=[]})=>e.some((e=>e.bidder===t))))}function getTopWindow(e,t=0){if(t>10)return e;try{return e.parent.document,getTopWindow(e.parent.window,++t)}catch(t){return e}}function JSONParseSafe(e){try{return JSON.parse(e)}catch(e){return console.error(e),null}}function copySafe(e){try{return JSON.parse(JSON.stringify(e))}catch(e){return console.error(e),null}}function getAdUnitSize(e){return e&&e.mediaTypes?e.mediaTypes.banner?e.mediaTypes.banner.sizes:e.mediaTypes.video?e.mediaTypes.video.playerSize:"":""}function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function getPbjsSchainConfig(e){return{ver:"1.0",complete:1,nodes:[{asi:e.asi,sid:String(e.sellerId),hp:1}]}}function getPbjsSchain(e){return{validation:"strict",config:getPbjsSchainConfig(e)}}function getPbjsSchains(e){return e.map((e=>({bidders:e.bidders,config:{schain:{validation:"relaxed",config:getPbjsSchainConfig(e)}}})))}function getSerializeStringImp({adserverTargeting:e,divId:t,utils:i}){if(i.logger.log(`wPbjs (${t}) >>> getSerializeStringImp:`,e),!e)return;const n=[e.nm_aid,e.nm_uid,e.hb_bidder,e.hb_pb,e.nm_ref,e.nm_fp].join(";");return i.logger.log(`wPbjs (${t}) >>> serialize impression:`,n),n}function getNMTargetImp({bid:e,divId:t,unitId:i,refresh:n,unitRule:r,utils:o}){if(o.logger.log(`wPbjs (${t}) >>> getNMTargetImp:`,e),"string"!=typeof e.auctionId)return;e.adserverTargeting.nm_aid=e.auctionId.replace(/\-/g,""),e.adserverTargeting.nm_uid=i||"",e.adserverTargeting.nm_ref=n,e.adserverTargeting.nm_fp=r[e.adserverTargeting.hb_bidder]||"";const d=getOriginNMStatistic(),s=d.replace(/https?\:\/\//,"");e.adserverTargeting.nm_dom=s,e.adserverTargeting.nm_secure=/https\:\/\//.test(d)?1:0,o.logger.log(`wPbjs (${t}) >>> getNMTargetImp:`,e.adserverTargeting)}function setPixel({frameWindow:e,hbImpr:t}){if(!t)return;const i=e.document.createElement("img");i.setAttribute("width","0"),i.setAttribute("height","0"),i.setAttribute("hspace","0"),i.setAttribute("vspace","0");const n=getOriginNMStatistic();i.src=`${n}/statistics/img/impr?data=${t}`,e.document.body.appendChild(i)}function getOriginNMStatistic(){return window.pbjs._getNMoriginReport&&window.pbjs._getNMoriginReport()||originServerReport}function registerAliases(e){e.pbjs.aliasBidder("appnexus","appnexus1",{gvlid:32})}cleanerAdUnitExpire(),isLocalStorage&&expiryStorage.garbageCollector("hb_");
